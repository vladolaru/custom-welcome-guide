!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=12)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.api},function(e,t){e.exports=window.React},function(e,t,o){"use strict";o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return r}));var n=o(4),s=o(3),i=o.n(s);const a=admin_welcome_guide_script_params.rest_url,c=()=>{const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{(async()=>{const e=await fetch(a+"wp/v2/guides?filter[orderby]=date&order=asc"),o=await e.json();t(o)})()},[]),e},r=()=>{const[e,t]=Object(n.useState)({});return Object(n.useEffect)(()=>{i.a.loadPromise.then(()=>{const o=new i.a.models.Settings;e.isAPILoaded||o.fetch().then(e=>{t({isShowPost:e.awg_options.is_show_post?e.awg_options.is_show_post:"",isShowPage:e.awg_options.is_show_page?e.awg_options.is_show_page:"",isShowCPT:e.awg_options.is_show_cpt?e.awg_options.is_show_cpt:"",featuredPostId:e.awg_options.featured_post_id?e.awg_options.featured_post_id:"",isAPILoaded:!0})})})},[]),e}},function(e,t){e.exports=window.wp.data},,function(e,t){e.exports=window.wp.notices},,,,function(e,t,o){"use strict";o.r(t);var n=o(0),s=o(1),i=o(2),a=o(3),c=o.n(a),r=o(6),l=o(8);o(5);const d=()=>{const e=Object(r.useSelect)(e=>e(l.store).getNotices().filter(e=>"snackbar"===e.type),[]),{removeNotice:t}=Object(r.useDispatch)(l.store);return Object(n.createElement)(s.SnackbarList,{className:"welcome-guide-admin-notices",notices:e,onRemove:t})};class u extends n.Component{constructor(){super(...arguments),this.state={isAPILoaded:!1,isShowPost:!0,isShowPage:!0,isShowCPT:!1,featuredPostId:"",posts:""}}componentDidMount(){c.a.loadPromise.then(()=>{this.settings=new c.a.models.Settings;const{isAPILoaded:e}=this.state;e||this.settings.fetch().then(e=>{this.setState({isShowPost:e.awg_options.is_show_post?e.awg_options.is_show_post:"",isShowPage:e.awg_options.is_show_page?e.awg_options.is_show_page:"",isShowCPT:e.awg_options.is_show_cpt?e.awg_options.is_show_cpt:"",featuredPostId:e.awg_options.featured_post_id?e.awg_options.featured_post_id:"",isAPILoaded:!0})})}),fetch(admin_welcome_guide_script_params.rest_url+"wp/v2/guides").then(e=>e.json()).then(e=>{this.setState({posts:e})})}toggleCheckbox(e){this.setState({[e]:!this.state[e]})}dropdownWithOptions(e){const t=[{label:Object(i.__)("None","admin-welcome-guide"),value:""}];return e.forEach(e=>{0==e.parent&&t.push({label:Object(i.__)(e.title.rendered,"admin-welcome-guide"),value:e.id})}),t}render(){const{isAPILoaded:e,posts:t,featuredPostId:o}=this.state;return e?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(n.createElement)(s.Icon,{icon:"admin-plugins"})," ",Object(i.__)("Welcome Guide Options","admin-welcome-guide")),Object(n.createElement)(s.PanelBody,null,Object(n.createElement)(s.PanelRow,null,Object(n.createElement)(s.ToggleControl,{label:Object(i.__)("Show guides in the Post editor","admin-welcome-guide"),help:"Show a list of all the admin guides in the post editor's sidebar.",checked:this.state.isShowPost,onChange:this.toggleCheckbox.bind(this,"isShowPost")})),Object(n.createElement)(s.PanelRow,null,Object(n.createElement)(s.ToggleControl,{label:Object(i.__)("Show guides in the Page editor","admin-welcome-guide"),help:"Display the admin guides in the page editor's sidebar.",checked:this.state.isShowPage,onChange:this.toggleCheckbox.bind(this,"isShowPage")})),Object(n.createElement)(s.PanelRow,null,Object(n.createElement)(s.ToggleControl,{label:Object(i.__)("Show guides in Custom Post Types","admin-welcome-guide"),help:"Enable the welcome guides for custom post types. Note that they need to use the Block editor for this option to work.",checked:this.state.isShowCPT,onChange:this.toggleCheckbox.bind(this,"isShowCPT")})),Object(n.createElement)(s.PanelRow,null,Object(n.createElement)(s.SelectControl,{help:Object(i.__)("Choose a Featured Guide if you want to replace the Block Editor's default Welcome Guide Modal that pops up when you open the Block Editor for the first time.","admin-welcome-guide"),label:Object(i.__)("Featured Guide","admin-welcome-guide"),onChange:e=>this.setState({featuredPostId:e}),options:t&&this.dropdownWithOptions(t),value:o}))),Object(n.createElement)(s.Button,{isPrimary:!0,onClick:()=>{localStorage.removeItem("admin-welcome-guide");const{isShowPost:e,isShowPage:t,isShowCPT:a}=this.state;new c.a.models.Settings({awg_options:{is_show_post:e?"true":"",is_show_page:t?"true":"",is_show_cpt:a?"true":"",featured_post_id:o}}).save(),Object(r.dispatch)("core/notices").createNotice("success",Object(i.__)("Settings Saved","admin-welcome-guide"),{type:"snackbar",isDismissible:!0,icon:Object(n.createElement)(s.Icon,{icon:"smiley"})})}},Object(i.__)("Save","admin-welcome-guide")),Object(n.createElement)(d,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(n.createElement)(s.Icon,{icon:"admin-plugins"})," ",Object(i.__)("Welcome Guide Options","admin-welcome-guide")),Object(n.createElement)(s.PanelBody,null,Object(n.createElement)(s.PanelRow,null,Object(n.createElement)(s.Spinner,null))))}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("admin-welcome-guide-wrapper");e&&Object(n.render)(Object(n.createElement)(u,null),e)})}]);